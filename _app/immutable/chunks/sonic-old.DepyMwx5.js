import{l as D,s as k,S as v,T as i}from"./2.Bt4yhKeu.js";const x=e=>new Promise(n=>setTimeout(n,e));var t={};const S={init:function(e,n,r,d,u,h,p,y){t.isPlaying=!1,t.sonicData=e,t.x=n,t.y=r,t.keyOrder=u,t.margin=h;const a=y/t.sonicData[t.keyOrder[0]].length,c=D().domain(p).range([130.81,261.63]);w();function m(s,o){console.log(t.sonicData[o].length*a,a);var l=new v({envelope:{decay:0,sustain:1,release:.5},oscillator:{count:8,spread:30,type:"sawtooth4"}}).toDestination();t.sonicData[o].forEach(function(f,g){g==0?l.triggerAttackRelease(c(f[o]),t.sonicData[o].length*a):i.schedule(function(){l.frequency.rampTo(c(f[o]),a)},g*a)}),i.position="0:0:0",i.start()}async function w(){if(!t.isPlaying){t.isPlaying=!0;for await(const s of t.keyOrder)m(d,s),await x(t.sonicData[s].length*a*1e3);t.isPlaying=!1}}},update:function(e,n,r){t.x=e,t.y=n,k("#svg").append("circle").attr("r",5).attr("stroke","red").attr("cx",-200).attr("cy",-200).attr("fill","none").attr("id","playHead")}};export{S as default};
