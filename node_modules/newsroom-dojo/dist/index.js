const e=new Date,t=new Date;function n(r,o,i,u){function a(e){return r(e=0===arguments.length?new Date:new Date(+e)),e}return a.floor=e=>(r(e=new Date(+e)),e),a.ceil=e=>(r(e=new Date(e-1)),o(e,1),r(e),e),a.round=e=>{const t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=(e,t)=>(o(e=new Date(+e),null==t?1:Math.floor(t)),e),a.range=(e,t,n)=>{const i=[];if(e=a.ceil(e),n=null==n?1:Math.floor(n),!(e<t&&n>0))return i;let u;do{i.push(u=new Date(+e)),o(e,n),r(e)}while(u<e&&e<t);return i},a.filter=e=>n((t=>{if(t>=t)for(;r(t),!e(t);)t.setTime(t-1)}),((t,n)=>{if(t>=t)if(n<0)for(;++n<=0;)for(;o(t,-1),!e(t););else for(;--n>=0;)for(;o(t,1),!e(t););})),i&&(a.count=(n,o)=>(e.setTime(+n),t.setTime(+o),r(e),r(t),Math.floor(i(e,t))),a.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(u?t=>u(t)%e==0:t=>a.count(0,t)%e==0):a:null)),a}const r=6e4,o=864e5,i=6048e5,u=n((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/o),(e=>e.getDate()-1));u.range;const a=n((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/o),(e=>e.getUTCDate()-1));a.range;function c(e){return n((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*r)/i))}n((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/o),(e=>Math.floor(e/o))).range;const s=c(0),l=c(1),f=c(2),g=c(3),h=c(4),d=c(5),y=c(6);function m(e){return n((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/i))}s.range,l.range,f.range,g.range,h.range,d.range,y.range;const p=m(0),M=m(1),w=m(2),v=m(3),T=m(4),C=m(5),D=m(6);p.range,M.range,w.range,v.range,T.range,C.range,D.range;const F=n((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));F.every=e=>isFinite(e=Math.floor(e))&&e>0?n((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,F.range;const U=n((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function b(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function x(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Y(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}U.every=e=>isFinite(e=Math.floor(e))&&e>0?n((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,U.range;var A,H,S={"-":"",_:" ",0:"0"},P=/^\s*\d+/,L=/^%/,I=/[\\^$*+?|[\]().{}]/g;function E(e,t,n){var r=e<0?"-":"",o=(r?-e:e)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(t)+o:o)}function B(e){return e.replace(I,"\\$&")}function O(e){return new RegExp("^(?:"+e.map(B).join("|")+")","i")}function j(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Z(e,t,n){var r=P.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function k(e,t,n){var r=P.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function N(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Q(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function V(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function W(e,t,n){var r=P.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function q(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function z(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J(e,t,n){var r=P.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function X(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function G(e,t,n){var r=P.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function R(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function K(e,t,n){var r=P.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ee(e,t,n){var r=P.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function te(e,t,n){var r=P.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ne(e,t,n){var r=L.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function re(e,t,n){var r=P.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function oe(e,t,n){var r=P.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ie(e,t){return E(e.getDate(),t,2)}function ue(e,t){return E(e.getHours(),t,2)}function ae(e,t){return E(e.getHours()%12||12,t,2)}function ce(e,t){return E(1+u.count(F(e),e),t,3)}function se(e,t){return E(e.getMilliseconds(),t,3)}function le(e,t){return se(e,t)+"000"}function fe(e,t){return E(e.getMonth()+1,t,2)}function ge(e,t){return E(e.getMinutes(),t,2)}function he(e,t){return E(e.getSeconds(),t,2)}function de(e){var t=e.getDay();return 0===t?7:t}function ye(e,t){return E(s.count(F(e)-1,e),t,2)}function me(e){var t=e.getDay();return t>=4||0===t?h(e):h.ceil(e)}function pe(e,t){return e=me(e),E(h.count(F(e),e)+(4===F(e).getDay()),t,2)}function Me(e){return e.getDay()}function we(e,t){return E(l.count(F(e)-1,e),t,2)}function ve(e,t){return E(e.getFullYear()%100,t,2)}function Te(e,t){return E((e=me(e)).getFullYear()%100,t,2)}function Ce(e,t){return E(e.getFullYear()%1e4,t,4)}function De(e,t){var n=e.getDay();return E((e=n>=4||0===n?h(e):h.ceil(e)).getFullYear()%1e4,t,4)}function Fe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+E(t/60|0,"0",2)+E(t%60,"0",2)}function Ue(e,t){return E(e.getUTCDate(),t,2)}function be(e,t){return E(e.getUTCHours(),t,2)}function xe(e,t){return E(e.getUTCHours()%12||12,t,2)}function Ye(e,t){return E(1+a.count(U(e),e),t,3)}function Ae(e,t){return E(e.getUTCMilliseconds(),t,3)}function He(e,t){return Ae(e,t)+"000"}function Se(e,t){return E(e.getUTCMonth()+1,t,2)}function Pe(e,t){return E(e.getUTCMinutes(),t,2)}function Le(e,t){return E(e.getUTCSeconds(),t,2)}function Ie(e){var t=e.getUTCDay();return 0===t?7:t}function Ee(e,t){return E(p.count(U(e)-1,e),t,2)}function Be(e){var t=e.getUTCDay();return t>=4||0===t?T(e):T.ceil(e)}function Oe(e,t){return e=Be(e),E(T.count(U(e),e)+(4===U(e).getUTCDay()),t,2)}function je(e){return e.getUTCDay()}function Ze(e,t){return E(M.count(U(e)-1,e),t,2)}function ke(e,t){return E(e.getUTCFullYear()%100,t,2)}function Ne(e,t){return E((e=Be(e)).getUTCFullYear()%100,t,2)}function Qe(e,t){return E(e.getUTCFullYear()%1e4,t,4)}function Ve(e,t){var n=e.getUTCDay();return E((e=n>=4||0===n?T(e):T.ceil(e)).getUTCFullYear()%1e4,t,4)}function We(){return"+0000"}function qe(){return"%"}function ze(e){return+e}function Je(e){return Math.floor(+e/1e3)}A=function(e){var t=e.dateTime,n=e.date,r=e.time,o=e.periods,i=e.days,c=e.shortDays,s=e.months,f=e.shortMonths,g=O(o),h=j(o),d=O(i),y=j(i),m=O(c),p=j(c),w=O(s),v=j(s),T=O(f),C=j(f),D={a:function(e){return c[e.getDay()]},A:function(e){return i[e.getDay()]},b:function(e){return f[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:ie,e:ie,f:le,g:Te,G:De,H:ue,I:ae,j:ce,L:se,m:fe,M:ge,p:function(e){return o[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:ze,s:Je,S:he,u:de,U:ye,V:pe,w:Me,W:we,x:null,X:null,y:ve,Y:Ce,Z:Fe,"%":qe},F={a:function(e){return c[e.getUTCDay()]},A:function(e){return i[e.getUTCDay()]},b:function(e){return f[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Ue,e:Ue,f:He,g:Ne,G:Ve,H:be,I:xe,j:Ye,L:Ae,m:Se,M:Pe,p:function(e){return o[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:ze,s:Je,S:Le,u:Ie,U:Ee,V:Oe,w:je,W:Ze,x:null,X:null,y:ke,Y:Qe,Z:We,"%":qe},U={a:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=y.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=T.exec(t.slice(n));return r?(e.m=C.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=w.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return P(e,t,n,r)},d:$,e:$,f:te,g:q,G:W,H:R,I:R,j:G,L:ee,m:X,M:_,p:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.p=h.get(r[0].toLowerCase()),n+r[0].length):-1},q:J,Q:re,s:oe,S:K,u:k,U:N,V:Q,w:Z,W:V,x:function(e,t,r){return P(e,n,t,r)},X:function(e,t,n){return P(e,r,t,n)},y:q,Y:W,Z:z,"%":ne};function A(e,t){return function(n){var r,o,i,u=[],a=-1,c=0,s=e.length;for(n instanceof Date||(n=new Date(+n));++a<s;)37===e.charCodeAt(a)&&(u.push(e.slice(c,a)),null!=(o=S[r=e.charAt(++a)])?r=e.charAt(++a):o="e"===r?" ":"0",(i=t[r])&&(r=i(n,o)),u.push(r),c=a+1);return u.push(e.slice(c,a)),u.join("")}}function H(e,t){return function(n){var r,o,i=Y(1900,void 0,1);if(P(i,e,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(t&&!("Z"in i)&&(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(o=(r=x(Y(i.y,0,1))).getUTCDay(),r=o>4||0===o?M.ceil(r):M(r),r=a.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(o=(r=b(Y(i.y,0,1))).getDay(),r=o>4||0===o?l.ceil(r):l(r),r=u.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?x(Y(i.y,0,1)).getUTCDay():b(Y(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,x(i)):b(i)}}function P(e,t,n,r){for(var o,i,u=0,a=t.length,c=n.length;u<a;){if(r>=c)return-1;if(37===(o=t.charCodeAt(u++))){if(o=t.charAt(u++),!(i=U[o in S?t.charAt(u++):o])||(r=i(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return D.x=A(n,D),D.X=A(r,D),D.c=A(t,D),F.x=A(n,F),F.X=A(r,F),F.c=A(t,F),{format:function(e){var t=A(e+="",D);return t.toString=function(){return e},t},parse:function(e){var t=H(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=A(e+="",F);return t.toString=function(){return e},t},utcParse:function(e){var t=H(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),A.format,H=A.parse,A.utcFormat,A.utcParse;const Xe=/,|%|[$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]/g;async function $e(e){let t={rows:[],cols:[]};var n;t.head=Object.keys(e[0]),t.rows=function(e){if(!e||!Array.isArray(e)||0===e.length)return[];const t=Object.keys(e[0]),n=e.map((e=>t.map((t=>e[t]))));return n.unshift(t),n}(e),t.cols=(n=t.rows)[0].map(((e,t)=>n.map((e=>e[t])))),t.body=t.rows.slice(1);const{cols:r,rows:o}=t;let i={};return i.type=await ft(r),function(e){const{head:t,type:n,rows:r,body:o}=e;return t.map(((e,t)=>({column:e,index:t,label:e,dataTypes:n[t].list,formats:n[t].format})))}({...t,...i})}function Ge(e="",t){let n={types:[]},r="body"===t?e.filter((e=>e)):e;const o=function(e){const t=rt(e)||ot(e)||nt(e,et)||it(e)||ut(e);return{valid:!!t}}(r);o.valid&&n.types.push("date");const i=Re(r);if(i.valid&&n.types.push("number"),!i.format&&"number"!==n.types.join()){(u=r,u.filter(((e,t)=>t===u.indexOf(e)))).length;r.length,n.types.push("string")}var u;return n.types.sort(),n}function Re(e){let t=e.map((e=>("string"==typeof e&&(e=e.replace(Xe,"")),""===e?NaN:e))).filter((e=>!isNaN(e))).map((e=>parseFloat(e)));return{valid:t.length===e.filter((e=>""!==e)).length,values:t}}function _e(e){if(e.length<2)return!0;e.sort(((e,t)=>e-t));const t=e[1]-e[0];for(let n=2;n<e.length;n++)if(e[n]-e[n-1]!==t)return!1;return!0}function Ke(e){if(e.length<2)return"Array must have at least two elements";let t=!0,n=!0;for(let r=1;r<e.length;r++)e[r]<=e[r-1]&&(t=!1),e[r]>=e[r-1]&&(n=!1);return!!t||!!n}const et=["%d-%b-%y","%d %b %Y","%d %b","%d-%B-%y","%d %B %Y","%d %B","%Y-%m-%d","%Y-%m-%dT%H:%M:%S%Z","%m/%d/%y %H:%M","%m/%d/%y %I:%M %p","%H:%M:%S","%b-%y","%b %y","%Y %b","%b %Y","%B-%y","%B %y","%Y %B","%B %Y","%Y-%y","%Y/%y","%b","%B"],tt=["%m/%d/%y","%m/%d/%Y"];function nt(e,t){let n,r=t.find((t=>(n=H(t),n(String(e[0])))));return r&&e.every((e=>n(String(e))))?r:""}function rt(e){let t=nt(e,tt);if(t){const n=e.every((e=>"string"==typeof e&&e.split("/")[0]<=12)),r=e.some((e=>"string"==typeof e&&e.split("/")[1]>12));t=n&&r?t:"%d/%m/"+t.slice(-2),n&&!r&&console.warn("Format unclear!!!")}return t||""}function ot(e){const t="%Y",n=nt(e,[t])===t,r=e.every((e=>"string"==typeof e&&4===e.length));return n&&r?t:""}function it(e){const t=e.every((e=>"string"==typeof e&&("Q"===e[0]||"Q"===e[5])&&7===e.length)),n="%Y"===nt(e.map((e=>"string"==typeof e?e.replace(/Q([1-4])/g,"").trim():e)),["%Y"]);return t&&n?"Q*":""}function ut(e){const t="%Y%m%d",n=nt(e,[t])===t,r=e.every((e=>"string"==typeof e&&parseInt(e.slice(4,6),10)>=1&&parseInt(e.slice(4,6),10)<=12)),o=e.every((e=>"string"==typeof e&&parseInt(e.slice(6),10)>=1&&parseInt(e.slice(6),10)<=31));return n&&r&&o?t:""}function at(e){if(0===e.length)return 0;let t=0;for(const n of e)n.length>t&&(t=n.length);return t}function ct(e){const t=new Set;for(const n of e){if(t.has(n))return!0;t.add(n)}return!1}function st(e){if(!Array.isArray(e)||0===e.length)return"Invalid data";const t=e[0],n=e.every((e=>"number"==typeof e)),r=e.every((e=>e instanceof Date)),o=e.some((e=>e<0)),i=new Set(e).size;if(r)return"scaleTime";if(n){if(o)return"scaleLinear";return Math.max(...e)/Math.min(...e)>1e3?"scaleLog":"scaleLinear"}return"string"!=typeof t&&n?"Unknown scale type":i===e.length?"scaleOrdinal":"scaleBand"}function lt(e,t){if(e.length!==t.length)return e;const n=e.map((e=>e.column));if(!t.every((e=>n.includes(e))))return e;const r=t.map((t=>e.find((e=>e.column===t))));return r.forEach(((e,t)=>{e.index=t})),r.sort(((e,t)=>e.index-t.index)),r}const ft=async e=>e.map(((e,t)=>{let n=Ge(e.slice(1),"body").types;t>0&&(n=n.filter((e=>"date"!==e)));let r=[];return n.forEach((t=>{let n={status:!1};var o;"number"===t&&(n=function(e){let t=Re(e).values;return{min:Math.min(...t),max:Math.max(...t),scale:st(t),hasEmptyValues:t.length!=e.length,sequential:_e(t),strictly:Ke(t)}}(e.slice(1))),"string"===t&&(n={hasRepeat:ct(o=e.slice(1)),longest:at(o),scale:st(o)}),"date"===t&&(n=function(e){const t=rt(e)||ot(e)||nt(e,et)||it(e)||ut(e),n=t.includes("%d")||t.includes("%H");return{dateFormat:t,hasDay:n,scale:st(e)}}(e.slice(1))),r.push({type:t,format:{...n}})})),{list:n,format:r}}));function gt(e,t){return Array.isArray(t)?t.some((t=>e.includes(t))):e.includes(t)}function ht(e){const t=[];return e.forEach((e=>{t.includes(e)||t.push(e)})),t}function dt(e){let t=e.length;for(;t>0;){const n=Math.floor(Math.random()*t);t--,[e[t],e[n]]=[e[n],e[t]]}return e}function yt(e,t){return Array.isArray(t)?t.filter((t=>e.includes(t))):e.includes(t)?t:[]}function mt(e,t){const n={};t.forEach((t=>{e.hasOwnProperty(t)&&(n[t]=e[t])}));for(const r in e)t.includes(r)||(n[r]=e[r]);return n}function pt(e,t){for(const n in t)"object"!=typeof e[n]?e[n]=t[n]:"object"==typeof t[n]&&(e[n]=pt(e[n],t[n]));return e}function Mt(e,t){const n=[];for(let e=0;e<=t.length;e++)n[e]=[e];for(let t=0;t<=e.length;t++)n[0][t]=t;for(let r=1;r<=t.length;r++)for(let o=1;o<=e.length;o++)t.charAt(r-1)===e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[t.length][e.length]}function wt(e,t,n){let r=[];if(t.length>2){const o=t.toLowerCase();r=e.filter((e=>{const t=e[n].toLowerCase(),r=Mt(t,o),i=Math.max(t.length,o.length)/3;return t.includes(o)||r<=i})),r=r.sort(((e,t)=>{const r=e[n].toLowerCase(),i=t[n].toLowerCase();return Mt(r,o)-Mt(i,o)}))}return r}function vt(e){var t,n=0;for(t=0;t<e.length;t+=1)n+=e[t];return n/e.length}function Tt(e){var t=e.length;return e.sort(),t%2==0?(e[t/2-1]+e[t/2])/2:e[(t-1)/2]}function Ct(e){var t,n,r=[],o=[],i=0;for(t=0;t<e.length;t+=1)o[n=e[t]]=(o[n]||0)+1,o[n]>i&&(i=o[n]);for(t in o)o.hasOwnProperty(t)&&o[t]===i&&r.push(Number(t));return r}function Dt(e){return e.sort(),[e[0],e[e.length-1]]}function Ft(e){return fetch(e).then((e=>e.json()))}function Ut(e){let t;t=top!==self?window.location.search.substring(1).split("&"):window.parent.location.search.substring(1).split("&");for(let n=0;n<t.length;n++){const[r,o]=t[n].split("=");if(r===e)return o}return null}function bt(e,t,n,r){var o,i=bt,u="";function a(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?a(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=r?0 in t?[]:[1]:t;for(o=0;o<t.length;o++){var c,s="",l=0,f="object"==typeof t[o]?t[o]:{};(f=Object.assign({},n,f))[""]={"":t[o]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(e,t,n,r,o,g,h){l?s+=l&&!o||l>1?e:t:(u+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(e,t,n,r,o,u){return t?a(f,t):r?a(f,u):o?i(a(f,u),f):n?"":new Option(a(f,u)).innerHTML})),c=g),o?--l||(h=a(f,h),/^f/.test(typeof h)?u+=h.call(f,s,(function(e){return i(e,f)})):u+=i(s,h,f,c),s=""):++l}))}return u}function xt(e="#gv-atom"){if(window.frameElement){const t=document.querySelector(e);function n(e,t){let n,r=e.clientHeight;!function o(){n=e.clientHeight,r!==n&&t(),r=n,e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),e.onElementHeightChangeTimer=setTimeout(o,200)}()}console.log("Inside version 1.1"),window.parent.postMessage({sentinel:"amp",type:"embed-size",height:document.body.scrollHeight},"*"),document.body.style.overflow="hidden",window.frameElement.height=t.offsetHeight,n(document.body,(function(){window.frameElement.height=t.offsetHeight}))}}function Yt(){if("undefined"!=typeof navigator){const e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,t=navigator.userAgent||navigator.vendor||window.opera;return e.test(t.substr(0,4))||/iPad/i.test(navigator.userAgent)}return!1}function At(){if("undefined"!=typeof navigator){const e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];return!!navigator.platform&&e.includes(navigator.platform)}return!1}function Ht(){let e=function(){let e;return"undefined"!=typeof navigator&&(e=navigator.userAgent.toLowerCase()),e}();console.log("browser",e);let t=!1;if(window.location!=window.parent.location){if(!window.location.ancestorOrigins)return!1;t="null"==window.location.ancestorOrigins[0]}else t="file://"===window.location.origin||null===window.location.origin||"https://mobile.guardianapis.com"===window.location.origin;return t}function St(){let e=window.location!=window.parent.location;console.log("embedded",e);let t={};return"undefined"!=typeof navigator?(t.platform=navigator.platform.toLowerCase(),t.userAgent=navigator.userAgent.toLowerCase(),t.isMobile=Yt(),t.app={isApp:Ht(),isIos:At(),isAndroid:/(android)/i.test(navigator.userAgent),isiPhone:/(iPhone)/i.test(navigator.platform),isiPad:/iPad/i.test(navigator.userAgent)}):(console.warn("Navigator is not defined. Running in a non-browser environment."),t.platform="unknown",t.userAgent="unknown",t.isMobile=!1,t.app={isApp:!1,isIos:!1,isAndroid:!1,isiPhone:!1,isiPad:!1}),t}function Pt(e,t){return Lt(parseFloat(e[1]),parseFloat(e[0]),parseFloat(t[1]),parseFloat(t[0]))}function Lt(e,t,n,r){var o=Ot(r-t);e=Ot(e),n=Ot(n);return 6371e3*Math.acos(Math.sin(e)*Math.sin(n)+Math.cos(e)*Math.cos(n)*Math.cos(o))}function It(e,t,n){var r=Number(n)/6371e3,o=Ot(Number(t)),i=Ot(e[1]),u=Ot(e[0]),a=Math.asin(Math.sin(i)*Math.cos(r)+Math.cos(i)*Math.sin(r)*Math.cos(o)),c=u+Math.atan2(Math.sin(o)*Math.sin(r)*Math.cos(i),Math.cos(r)-Math.sin(i)*Math.sin(a));return[Bt(c=(c+3*Math.PI)%(2*Math.PI)-Math.PI),Bt(a)]}function Et(e,t){var n=Ot(e[1]),r=Ot(e[0]),o=Ot(t[1]),i=Ot(t[0])-r,u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return Math.abs(i)>Math.PI&&(i=i>0?-(2*Math.PI-i):2*Math.PI+i),(Bt(Math.atan2(i,u))+360)%360}function Bt(e){return 180*e/Math.PI}function Ot(e){return e*Math.PI/180}function jt(e,t,n,r,o,i,u){const a=u*Math.PI/180,c=e*Math.PI/180,s=i-o,l=n/s*360/(2*Math.PI),f=l/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)));return{x:n/s*(t-o),y:r-(l/2*Math.log((1+Math.sin(c))/(1-Math.sin(c)))-f)}}export{Pt as calculateDistance,Ht as checkApp,At as checkIOS,Yt as checkMobile,St as checkPlatform,gt as contains,jt as convertGeoToPixel,It as createCoord,wt as filterWithFuzzyMatch,Et as getBearing,Ft as getJson,Ut as getURLParams,yt as match_array,vt as mean,Tt as median,pt as merge,Ct as mode,bt as mustache,Dt as range,xt as resizeIframe,$e as schema,dt as shuffle,lt as sortJsonByColumnOrder,mt as sortObjectByKey,Lt as sphericalCosinus,ht as unique};
